
@inherits Sandbox.UI.Panel
@using Facepunch.Checkers;

<style>
    PreGameHud {
        display: @Display;
    }
</style>

<root>
    <text class="title">Choose a team</text>
    <div class="team-buttons">
        <button @onclick=@(() => CheckersGame.SetClientTeam(CheckersTeam.Red))>
            <text>Red: </text>
            <text text=@Player1Name />
        </button>
        <button @onclick=@(() => CheckersGame.SetClientTeam(CheckersTeam.Black))>
            <text>Black: </text>
            <text text=@Player2Name />
        </button>
        <button @onclick=@(() => CheckersGame.SetClientTeam(CheckersTeam.Spectator))>
            <text>Spectate</text>
        </button>
        <button @onclick=@CheckersGame.PlayAgainstAi>
            <text>Play vs AI</text>
        </button>
    </div>
</root>

@code {
    string Player1Name => CheckersGame.Instance.RedPlayer?.Client.Name ?? "Nobody";
    string Player2Name => CheckersGame.Instance.BlackPlayer?.Client.Name ?? "Nobody";
    string Display => (CheckersGame.Instance.CurrentState == GameState.WaitingToStart) ? "flex" : "none";

    protected override int BuildHash()
    {
        return System.HashCode.Combine(Player1Name, Player2Name, Display);
    }
}
